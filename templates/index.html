<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="{{ url_for('static', filename= 'css/bootstrap.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename= 'css/style.css') }}">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container-fluid">
        <a class="navbar-brand" href="#">Annotation Helper</a>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                <li class="nav-item">
                    <a class="nav-link active" aria-current="page" href="#">Home</a>
                </li>
            </ul>
        </div>
    </div>
</nav>
<div class="sidebar">
    <ul class="nav nav-pills nav-flush flex-sm-column flex-row flex-nowrap mb-auto mx-auto text-center justify-content-between w-100 px-3 align-items-center">
        <li>
            <button type="button" id="dragBtn" class="btn btn-outline-success"
                    title="Select Tool: Use it to select lines and move them">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                     class="bi bi-arrows-move" viewBox="0 0 16 16">
                    <path fill-rule="evenodd"
                          d="M7.646.146a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 1.707V5.5a.5.5 0 0 1-1 0V1.707L6.354 2.854a.5.5 0 1 1-.708-.708l2-2zM8 10a.5.5 0 0 1 .5.5v3.793l1.146-1.147a.5.5 0 0 1 .708.708l-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 0 1 .708-.708L7.5 14.293V10.5A.5.5 0 0 1 8 10zM.146 8.354a.5.5 0 0 1 0-.708l2-2a.5.5 0 1 1 .708.708L1.707 7.5H5.5a.5.5 0 0 1 0 1H1.707l1.147 1.146a.5.5 0 0 1-.708.708l-2-2zM10 8a.5.5 0 0 1 .5-.5h3.793l-1.147-1.146a.5.5 0 0 1 .708-.708l2 2a.5.5 0 0 1 0 .708l-2 2a.5.5 0 0 1-.708-.708L14.293 8.5H10.5A.5.5 0 0 1 10 8z"/>
                </svg>
                <span class="visually-hidden">Button</span>
            </button>
        </li>
        <li>
            <button type="button" id="zoomBtn" class="btn btn-outline-success"
                    title="Zoom Tool: Use it to Zoom in or Zoom out">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-zoom-in"
                     viewBox="0 0 16 16">
                    <path fill-rule="evenodd"
                          d="M6.5 12a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11zM13 6.5a6.5 6.5 0 1 1-13 0 6.5 6.5 0 0 1 13 0z"/>
                    <path d="M10.344 11.742c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1 6.538 6.538 0 0 1-1.398 1.4z"/>
                    <path fill-rule="evenodd"
                          d="M6.5 3a.5.5 0 0 1 .5.5V6h2.5a.5.5 0 0 1 0 1H7v2.5a.5.5 0 0 1-1 0V7H3.5a.5.5 0 0 1 0-1H6V3.5a.5.5 0 0 1 .5-.5z"/>
                </svg>
                <span class="visually-hidden">Button</span>
            </button>
        </li>
        <li>
            <button type="button" id="delBtn" class="btn btn-outline-success"
                    title="Delete Tool: Select a line and press Delete button to remove">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash"
                     viewBox="0 0 16 16">
                    <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"/>
                    <path fill-rule="evenodd"
                          d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"/>
                </svg>
                <span class="visually-hidden">Button</span>
            </button>
        </li>
        </br>
        ...
        </br>
        <li class="nav-item">
            <button type="button" id="pntBtn" class="btn btn-outline-success"
                    title="Line Tool: Click twice on the canvas to create a line">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pencil"
                     viewBox="0 0 16 16">
                    <path d="M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z"/>
                </svg>
                <span class="visually-hidden">Button</span>
            </button>
        </li>

        <li>
            <button type="button" id="penBtn" class="btn btn-outline-success"
                    title="Polygon Tool: Click n times to draw n-point polygon">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                     class="bi bi-pentagon" viewBox="0 0 16 16">
                    <path d="M7.685 1.545a.5.5 0 0 1 .63 0l6.263 5.088a.5.5 0 0 1 .161.539l-2.362 7.479a.5.5 0 0 1-.476.349H4.099a.5.5 0 0 1-.476-.35L1.26 7.173a.5.5 0 0 1 .161-.54l6.263-5.087Zm8.213 5.28a.5.5 0 0 0-.162-.54L8.316.257a.5.5 0 0 0-.631 0L.264 6.286a.5.5 0 0 0-.162.538l2.788 8.827a.5.5 0 0 0 .476.349h9.268a.5.5 0 0 0 .476-.35l2.788-8.826Z"/>
                </svg>
                <span class="visually-hidden">Button</span>
            </button>

        </li>
    </ul>
</div>
<div class="sidebar-right">
    <div class="alert alert-secondary" role="alert">
        <h4 class="alert-heading"> {{ data['filename'] }} </h4>
        <hr>
        <p>Current Frame: {{ data['frame_no'] }}</p>
        <p>Total Frames: {{ data['num_frames'] }}</p>
        <hr>

        <div class="d-grid col-12 mx-auto" >
            <div id="lineList">
<!--                <div class="d-grid col-10 mx-auto">-->
<!--                    <button class="btn btn-primary" type="button">Button 1</button>-->
<!--                </div>-->
<!--                <div class="d-grid col-2 mx-auto">-->
<!--                    <button class="btn btn-primary" type="button">Del</button>-->
<!--                </div>-->
            </div>
        </div>

    </div>

</div>
<div class="container">
        {% if not data %}
            <script>alert('Upload a video first to get started');</script>
        {% endif %}

    <div class="row">
        <div class="col-md-6">
            <div class="row">
                <form method="post" enctype="multipart/form-data">
                    <label><strong>Upload Video</strong></label>
                    <div class="custom-file">
                        <div class="row">
                            <div class="col">
                                <div class="input-group mb-3">
                                    <input type="file" name="file" multiple class="custom-file-input form-control"
                                       id="customFile">
                                    <button type="submit" name="upload" value="upload" id="upload"
                                            class="btn btn-block btn-dark"><i class="fa fa-fw fa-upload"></i> Upload
                                    </button>
                                </div>
                            </div>

                        </div>
                    </div>
                </form>
            </div>
        </div>
        <div class="col-md-3">
            <div class="row">
                <form method="post" enctype="multipart/form-data">
                    <label><strong>Go To Frame</strong></label>
                    <div class="custom-file">
                        <div class="row">
                            <div class="col">
                                <div class="input-group mb-3">
                                    <input type="number" class="form-control" name="frameNo" value="{{ data['frame_no'] }}" placeholder="Frame No." min="1" max="{{ data['num_frames'] }}" id="frameInput">
                                    <button class="btn btn-success" name="frameNoSubmit" type="submit">Go</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>

    </div>
    <div class="row">

        <div class="col-md-3">
            <div class="row">
                <form method="post" enctype="multipart/form-data">
                    <label><strong>Resize Frame</strong></label>
                    <div class="custom-file">
                        <div class="row">
                            <div class="col">
                                <div class="input-group mb-3">
                                    <input type="text" class="form-control" name="heightInput" value=" {{ data['image_height'] }} " placeholder="Width" min="640" id="heightInput">
                                    <input type="text" class="form-control" name="widthInput" value=" {{ data['image_width'] }} " placeholder="Height" min="480" id="widthInput">
                                    <button class="btn btn-success" name="sizeSubmit" type="submit">Resize</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
        <div class="col-md-6">
            <div class="row">

<!--                <label><strong>Show selected line coordinates:</strong></label>-->
<!--&lt;!&ndash;                <p id="showLine"></p>&ndash;&gt;-->
<!--                <input id="showLine" class="form-control" type="text" aria-label="Disabled input example" readonly>-->

                <label for="showLine" class="form-label">Selected Line Coordinates</label>
                <div class="input-group mb-3 input-group-default">
                    <span class="input-group-text" id="lineName"></span>
                    <input id="showLine" type="text" class="form-control" aria-describedby="basic-addon3">
                </div>

            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-9">
           <canvas id="mainView"></canvas>
        </div>
        <div class="col-md-3">
            <ul id="lineList1">
            </ul>
        </div>

    </div>
    <div class="row" id="control">
        <div class="col-md-9">
            <div class="row">
                <div class="col-md-3">
                    <button type="button" class="btn btn-danger" >Previous</button>
                </div>
                <!--
                <div class="col-md-6">
                    <label for="customRange1" class="form-label" >Image Scale</label>
                    <input type="range" class="form-range" min="0" max="3" id="customRange1" step="0.001">
                </div>
                -->
                <div class="col-md-3 offset-md-6 justify-content-end">
                    <button type="button" class="btn btn-success" >Next</button>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    var mysrc = "{{ data['image_path'] }}";
</script>
<script src="{{url_for('static', filename='scripts/fabric/fabric.js')}}"></script>
<script src="{{url_for('static', filename='scripts/control.js')}}"></script>
<script src="{{url_for('static', filename='scripts/actions.js')}}"></script>
<script src="{{url_for('static', filename='scripts/engine.js')}}"></script>
<script src="{{url_for('static', filename='scripts/bootstrap/bootstrap.js')}}"></script>
</body>
</html>

